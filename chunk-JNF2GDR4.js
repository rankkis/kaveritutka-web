import{Z as b,g as l}from"./chunk-6NKXEU3K.js";import{a as m,b as d}from"./chunk-ODN5LVDJ.js";var p=class c{MIN_ZOOM_FOR_LOCATION_DETECTION=12;locations=[{name:"Lahti",center:[60.9827,25.6612],radius:15},{name:"Helsinki",center:[60.1695,24.9354],radius:20},{name:"Espoo",center:[60.2055,24.6559],radius:15},{name:"Vantaa",center:[60.2934,25.0378],radius:15},{name:"Tampere",center:[61.4978,23.761],radius:15},{name:"Turku",center:[60.4518,22.2666],radius:12},{name:"Oulu",center:[65.0121,25.4651],radius:12},{name:"Jyv\xE4skyl\xE4",center:[62.2426,25.7473],radius:10},{name:"Kuopio",center:[62.8924,27.6782],radius:10},{name:"Joensuu",center:[62.601,29.7636],radius:10},{name:"Pori",center:[61.4851,21.7974],radius:10},{name:"Lappeenranta",center:[61.0587,28.1887],radius:10},{name:"Vaasa",center:[63.0959,21.6164],radius:10},{name:"Kotka",center:[60.4664,26.9458],radius:8},{name:"H\xE4meenlinna",center:[60.9959,24.464],radius:8},{name:"Porvoo",center:[60.3925,25.6651],radius:8},{name:"Hyvink\xE4\xE4",center:[60.6291,24.8581],radius:8},{name:"Hollola",center:[60.9979,25.4359],radius:10},{name:"Nastola",center:[60.946,25.9285],radius:8},{name:"Asikkala",center:[61.2156,25.5279],radius:8},{name:"Orimattila",center:[60.8045,25.7295],radius:8},{name:"K\xE4rk\xF6l\xE4",center:[60.8722,25.2773],radius:6},{name:"Lammi",center:[61.0833,25.0167],radius:6},{name:"Padasjoki",center:[61.3494,25.2781],radius:6},{name:"Sysm\xE4",center:[61.5008,25.686],radius:6},{name:"Hartola",center:[61.5812,26.0142],radius:6},{name:"Riihim\xE4ki",center:[60.7394,24.7722],radius:7},{name:"J\xE4rvenp\xE4\xE4",center:[60.4736,25.0899],radius:7},{name:"Kerava",center:[60.4042,25.105],radius:6},{name:"Tuusula",center:[60.4033,25.0267],radius:8},{name:"Nurmij\xE4rvi",center:[60.4639,24.8074],radius:8},{name:"M\xE4nts\xE4l\xE4",center:[60.6342,25.3167],radius:7},{name:"Sipoo",center:[60.375,25.2667],radius:8},{name:"Kirkkonummi",center:[60.1217,24.4383],radius:8},{name:"Kauniainen",center:[60.2111,24.7261],radius:3},{name:"Lohja",center:[60.2486,24.0653],radius:8}];mapStateSubject=new l({center:[60.9872,25.6447],zoom:15,locations:["Lahti"]});mapState$=this.mapStateSubject.asObservable();constructor(){}saveMapState(a,t){let n=this.detectLocations(a,t),i={center:a,zoom:t,locations:n};this.mapStateSubject.next(i)}getMapState(){return this.mapStateSubject.value}getCurrentLocations(){return this.mapStateSubject.value.locations}clearMapState(){let a={center:[60.9872,25.6447],zoom:15,locations:["Lahti"]};this.mapStateSubject.next(a)}detectLocations(a,t){if(t<this.MIN_ZOOM_FOR_LOCATION_DETECTION)return[];let[n,i]=a,r=this.locations.map(e=>d(m({},e),{distance:this.calculateDistance(n,i,e.center[0],e.center[1])})).filter(e=>e.distance<=e.radius).sort((e,o)=>e.distance-o.distance);if(r.length===0)return[];if(r.length===1)return[r[0].name];let s=r[0];return r.filter(e=>e.distance<=s.distance*1.4).slice(0,3).map(e=>e.name)}calculateDistance(a,t,n,i){let s=this.degreesToRadians(n-a),u=this.degreesToRadians(i-t),e=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.degreesToRadians(a))*Math.cos(this.degreesToRadians(n))*Math.sin(u/2)*Math.sin(u/2);return 6371*(2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e)))}degreesToRadians(a){return a*(Math.PI/180)}static \u0275fac=function(t){return new(t||c)};static \u0275prov=b({token:c,factory:c.\u0275fac,providedIn:"root"})};export{p as a};
