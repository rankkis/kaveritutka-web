<div class="map-container">
  <div id="map"></div>

  <div class="sidebar" [class.open]="selectedPlayground">
    <div class="sidebar-content" *ngIf="selectedPlayground">
      <div class="sidebar-header">
        <h2>{{ selectedPlayground.name }}</h2>
        <button class="close-btn" (click)="closeSidebar()">√ó</button>
      </div>

      <div class="playground-info">
        <p *ngIf="selectedPlayground.address" class="address">
          üìç {{ selectedPlayground.address }}
        </p>
        <p *ngIf="selectedPlayground.description" class="description">
          {{ selectedPlayground.description }}
        </p>
      </div>

      <div class="check-ins-section">
        <div class="section-header">
          <h3>Tulevat k√§ynnit</h3>
          <button class="btn-primary" (click)="onCreateCheckIn()">
            + Uusi k√§ynti
          </button>
        </div>

        <div class="check-ins-list">
          <div *ngIf="checkIns.length === 0" class="empty-state">
            <p>Ei viel√§ suunniteltuja k√§yntej√§.</p>
            <p>Ole ensimm√§inen suunnittelemassa k√§ynti√§!</p>
          </div>

          <div *ngFor="let checkIn of checkIns" class="check-in-card" [class.ongoing]="isEventOngoing(checkIn)">
            <div class="check-in-header">
              <div class="time-info">
                <span class="date">{{ formatDate(checkIn.scheduledTime) }}</span>
                <span class="time">{{ formatTime(checkIn.scheduledTime) }}</span>
              </div>
              <span class="ongoing-badge" *ngIf="isEventOngoing(checkIn)">
                üü¢ {{ getTimeStatus(checkIn) }}
              </span>
            </div>
            <div class="check-in-body">
              <p class="parent-name">üë§ {{ checkIn.parentName }}</p>

              <!-- Display all participants -->
              <div class="participants-section">
                <div class="participant" *ngFor="let participant of checkIn.participants; let i = index">
                  <p class="child-info">
                    üßí {{ getParticipantLabel(participant) }}
                  </p>
                  <div class="interests" *ngIf="participant.interests.length > 0">
                    <span class="interest-tag" *ngFor="let interest of participant.interests">
                      {{ interest }}
                    </span>
                  </div>
                </div>
              </div>

              <p class="additional-info" *ngIf="checkIn.additionalInfo">
                üí¨ {{ checkIn.additionalInfo }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
