<h2 mat-dialog-title>Luo käynti: {{ data.playground.name }}</h2>

<mat-dialog-content>
  <form [formGroup]="checkInForm" class="check-in-form">

    <!-- Date Selection -->
    <div class="form-section">
      <label class="section-label">Päivämäärä</label>
      <div class="chip-row">
        <button type="button"
                *ngFor="let date of dateOptions"
                class="selection-chip"
                [class.selected]="selectedDate === date.value"
                (click)="selectDate(date.value)">
          {{ date.label }}
        </button>
      </div>
    </div>

    <!-- Time Selection -->
    <div class="form-section">
      <label class="section-label">Kellonaika</label>
      <mat-form-field appearance="outline" class="full-width">
        <mat-select formControlName="scheduledTime">
          <mat-option *ngFor="let time of timeOptions" [value]="time">
            {{ getTimeLabel(time) }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Age Selection -->
    <div class="form-section">
      <label class="section-label">Lapsen ikä</label>
      <div class="chip-row">
        <button type="button"
                *ngFor="let age of ageOptions"
                class="selection-chip age-chip"
                [class.selected]="selectedAge === age"
                (click)="selectAge(age)">
          {{ age }}v
        </button>
      </div>
    </div>

    <!-- Gender Selection -->
    <div class="form-section">
      <label class="section-label">Sukupuoli (valinnainen)</label>
      <div class="chip-row">
        <button type="button"
                *ngFor="let gender of genderOptions"
                class="selection-chip gender-chip"
                [class.selected]="selectedGender === gender.value"
                (click)="selectGender(gender.value)">
          <span class="icon">{{ gender.icon }}</span>
          <span class="label">{{ gender.label }}</span>
        </button>
        <button type="button"
                *ngIf="selectedGender !== null"
                class="remove-selection-btn"
                (click)="removeGenderSelection()">
          Poista valinta
        </button>
      </div>
    </div>

    <!-- Interests Selection -->
    <div class="form-section">
      <label class="section-label">Kiinnostuksen kohteet (valitse vähintään yksi)</label>
      <div class="interests-grid">
        <button type="button"
                *ngFor="let interest of availableInterests"
                class="interest-chip"
                [class.selected]="isInterestSelected(interest.value)"
                (click)="toggleInterest(interest.value)">
          {{ interest.label }}
        </button>
      </div>
      <div class="error-message" *ngIf="submitted && selectedInterests.length === 0">
        Valitse vähintään yksi kiinnostuksen kohde
      </div>
    </div>

    <!-- Additional Info -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Lisätiedot (valinnainen)</mat-label>
      <textarea matInput formControlName="additionalInfo"
                rows="3"
                placeholder="Esim. kuinka kauan oleskelette, mitä välineitä otatte mukaan, jne."></textarea>
    </mat-form-field>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Peruuta</button>
  <button mat-raised-button color="primary"
          (click)="onSubmit()"
          [disabled]="!checkInForm.valid || selectedInterests.length === 0">
    Leikkimään!
  </button>
</mat-dialog-actions>
