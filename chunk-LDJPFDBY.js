import{a as E}from"./chunk-RP55KFO2.js";import{c as D}from"./chunk-35YCIJCZ.js";import{x as w,y as S}from"./chunk-TSLVDBLJ.js";import{d as v,e as y,g as x,l as b,n as I}from"./chunk-4MKTNDPE.js";import{Gb as r,Hb as _,Ib as s,Ma as C,Na as c,Sa as m,Za as P,cb as g,ib as d,ja as u,ka as f,kb as O,qb as a,rb as i,sb as M,tb as k,vb as h,wb as l}from"./chunk-WLRQ2KVN.js";function z(t,n){if(t&1&&M(0,"img",16),t&2){let e=l(2);d("src",e.playground.imageUrl,C)("alt",e.playground.name)}}function F(t,n){if(t&1&&(a(0,"p",17),r(1),i()),t&2){let e=l(2);c(),s(" \u{1F4CD} ",e.playground.address," ")}}function j(t,n){if(t&1&&(a(0,"p",18),r(1),i()),t&2){let e=l(2);c(),s(" ",e.playground.description," ")}}function $(t,n){t&1&&(a(0,"div",19)(1,"p"),r(2,"Ei viel\xE4 suunniteltuja k\xE4yntej\xE4."),i(),a(3,"p"),r(4,"Ole ensimm\xE4inen suunnittelemassa k\xE4ynti\xE4!"),i()())}function A(t,n){if(t&1&&(a(0,"span",31),r(1),i()),t&2){let e=l().$implicit,o=l(2);c(),s(" \u{1F7E2} ",o.getTimeStatus(e)," ")}}function R(t,n){if(t&1&&(a(0,"span",37),r(1),i()),t&2){let e=n.$implicit;c(),s(" ",e," ")}}function L(t,n){if(t&1&&(a(0,"div",35),g(1,R,2,1,"span",36),i()),t&2){let e=l().$implicit;c(),d("ngForOf",e.interests)}}function N(t,n){if(t&1&&(a(0,"div",32)(1,"p",33),r(2),i(),g(3,L,2,1,"div",34),i()),t&2){let e=n.$implicit,o=l(3);c(2),s(" \u{1F9D2} ",o.getParticipantLabel(e)," "),c(),d("ngIf",e.interests.length>0)}}function V(t,n){if(t&1&&(a(0,"p",38),r(1),i()),t&2){let e=l().$implicit;c(),s(" \u{1F4AC} ",e.additionalInfo," ")}}function G(t,n){if(t&1&&(a(0,"div",20)(1,"div",21)(2,"div",22)(3,"span",23),r(4),i(),a(5,"span",24),r(6),i()(),g(7,A,2,1,"span",25),i(),a(8,"div",26)(9,"p",27),r(10),i(),a(11,"div",28),g(12,N,4,2,"div",29),i(),g(13,V,2,1,"p",30),i()()),t&2){let e=n.$implicit,o=l(2);O("ongoing",o.isEventOngoing(e)),c(4),_(o.formatDate(e.scheduledTime)),c(2),_(o.formatTime(e.scheduledTime)),c(),d("ngIf",o.isEventOngoing(e)),c(3),s("\u{1F464} ",e.parentName,""),c(2),d("ngForOf",e.participants),c(),d("ngIf",e.additionalInfo)}}function U(t,n){if(t&1){let e=k();a(0,"div",1)(1,"div",2)(2,"button",3),h("click",function(){u(e);let p=l();return f(p.goBack())}),a(3,"span",4),r(4,"\u2190"),i(),r(5," Takaisin "),i(),a(6,"h1"),r(7),i()(),a(8,"div",5)(9,"div",6),g(10,z,1,2,"img",7)(11,F,2,1,"p",8)(12,j,2,1,"p",9),i(),a(13,"div",10)(14,"div",11)(15,"h2"),r(16,"Tulevat k\xE4ynnit"),i(),a(17,"button",12),h("click",function(){u(e);let p=l();return f(p.onCreateCheckIn())}),r(18," + Uusi k\xE4ynti "),i()(),a(19,"div",13),g(20,$,5,0,"div",14)(21,G,14,8,"div",15),i()()()()}if(t&2){let e=l();c(7),_(e.playground.name),c(3),d("ngIf",e.playground.imageUrl),c(),d("ngIf",e.playground.address),c(),d("ngIf",e.playground.description),c(8),d("ngIf",e.checkIns.length===0),c(),d("ngForOf",e.checkIns)}}var T=class t{constructor(n,e,o,p,B){this.route=n;this.router=e;this.playgroundService=o;this.checkInService=p;this.dialog=B}playground=null;checkIns=[];ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.loadPlayground(n),this.loadCheckIns(n))}loadPlayground(n){this.playgroundService.getPlaygrounds().subscribe(e=>{this.playground=e.find(o=>o.id===n)||null})}loadCheckIns(n){this.checkInService.getCheckInsByPlayground(n).subscribe(e=>{this.checkIns=e})}onCreateCheckIn(){if(!this.playground)return;window.innerWidth<=768?this.router.navigate(["/playground",this.playground.id,"new-checkin"]):this.dialog.open(E,{width:"100%",maxWidth:"640px",maxHeight:"95vh",panelClass:"check-in-dialog-panel",data:{playground:this.playground},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(o=>{o&&this.playground&&this.loadCheckIns(this.playground.id)})}goBack(){this.router.navigate(["/map"])}formatTime(n){return new Date(n).toLocaleTimeString("fi-FI",{hour:"2-digit",minute:"2-digit"})}formatDate(n){return new Date(n).toLocaleDateString("fi-FI",{weekday:"short",month:"short",day:"numeric"})}getGenderInFinnish(n){switch(n){case"boy":return"poika";case"girl":return"tytt\xF6";default:return"lapsi"}}getParticipantLabel(n){let e=this.getGenderInFinnish(n.childGender);return`${n.childAge}v-${e}`}isEventOngoing(n){let e=new Date,o=new Date(n.scheduledTime),p=new Date(o.getTime()+n.duration*60*60*1e3);return e>=o&&e<=p}getTimeStatus(n){if(this.isEventOngoing(n)){let e=new Date(new Date(n.scheduledTime).getTime()+n.duration*60*60*1e3);return`Paikalla nyt (viel\xE4 ${Math.round((e.getTime()-new Date().getTime())/(60*1e3))} min)`}return""}static \u0275fac=function(e){return new(e||t)(m(b),m(I),m(S),m(w),m(D))};static \u0275cmp=P({type:t,selectors:[["app-playground-detail"]],decls:1,vars:1,consts:[["class","detail-container",4,"ngIf"],[1,"detail-container"],[1,"detail-header"],[1,"back-btn",3,"click"],[1,"back-icon"],[1,"detail-content"],[1,"playground-info"],["class","playground-image",3,"src","alt",4,"ngIf"],["class","address",4,"ngIf"],["class","description",4,"ngIf"],[1,"check-ins-section"],[1,"section-header"],[1,"btn-primary",3,"click"],[1,"check-ins-list"],["class","empty-state",4,"ngIf"],["class","check-in-card",3,"ongoing",4,"ngFor","ngForOf"],[1,"playground-image",3,"src","alt"],[1,"address"],[1,"description"],[1,"empty-state"],[1,"check-in-card"],[1,"check-in-header"],[1,"time-info"],[1,"date"],[1,"time"],["class","ongoing-badge",4,"ngIf"],[1,"check-in-body"],[1,"parent-name"],[1,"participants-section"],["class","participant",4,"ngFor","ngForOf"],["class","additional-info",4,"ngIf"],[1,"ongoing-badge"],[1,"participant"],[1,"child-info"],["class","interests",4,"ngIf"],[1,"interests"],["class","interest-tag",4,"ngFor","ngForOf"],[1,"interest-tag"],[1,"additional-info"]],template:function(e,o){e&1&&g(0,U,22,6,"div",0),e&2&&d("ngIf",o.playground)},dependencies:[x,v,y],styles:[".detail-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#fff}.detail-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;border-bottom:1px solid #e0e0e0;padding:1rem;z-index:100;box-shadow:0 2px 4px #0000000d}.detail-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1rem;color:#4caf50;cursor:pointer;padding:.5rem 0;margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem;font-weight:500}.detail-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1}.detail-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{color:#45a049}.detail-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;color:#333}.detail-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem}.playground-info[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid #e0e0e0}.playground-info[_ngcontent-%COMP%]   .playground-image[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:8px;margin-bottom:1rem;box-shadow:0 2px 8px #0000001a}.playground-info[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{color:#666;margin:.5rem 0;font-size:1rem}.playground-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#888;font-size:.95rem;margin:.5rem 0;line-height:1.5}.check-ins-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.check-ins-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;color:#333}.check-ins-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:4px;cursor:pointer;font-size:1rem;font-weight:500;white-space:nowrap}.check-ins-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#45a049}.check-ins-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active{background-color:#3d8b40}.check-ins-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:#999}.check-ins-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.75rem 0;font-size:1rem}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:8px;padding:1.25rem;margin-bottom:1.25rem;border-left:4px solid #4CAF50}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.check-ins-list[_ngcontent-%COMP%]   .check-in-card.ongoing[_ngcontent-%COMP%]{background:#e8f5e9;border-left-color:#2e7d32;box-shadow:0 2px 8px #4caf5033}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-header[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:.75rem}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-header[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center;flex-wrap:wrap}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-header[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:1rem}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-header[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background:#4caf50;color:#fff;padding:.4rem .75rem;border-radius:4px;font-size:.95rem;font-weight:500}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-header[_ngcontent-%COMP%]   .ongoing-badge[_ngcontent-%COMP%]{background:#2e7d32;color:#fff;padding:.4rem 1rem;border-radius:12px;font-size:.9rem;font-weight:500;white-space:nowrap}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-body[_ngcontent-%COMP%]   .parent-name[_ngcontent-%COMP%]{margin:.75rem 0;font-size:1rem;font-weight:500;color:#333}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-body[_ngcontent-%COMP%]   .participants-section[_ngcontent-%COMP%]{margin:1rem 0}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-body[_ngcontent-%COMP%]   .participants-section[_ngcontent-%COMP%]   .participant[_ngcontent-%COMP%]{margin-bottom:1rem;padding-left:.75rem;border-left:2px solid #e0e0e0}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-body[_ngcontent-%COMP%]   .participants-section[_ngcontent-%COMP%]   .participant[_ngcontent-%COMP%]:last-child{margin-bottom:0}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-body[_ngcontent-%COMP%]   .participants-section[_ngcontent-%COMP%]   .participant[_ngcontent-%COMP%]   .child-info[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem;color:#666;font-weight:500}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-body[_ngcontent-%COMP%]   .participants-section[_ngcontent-%COMP%]   .participant[_ngcontent-%COMP%]   .interests[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin:.75rem 0 0}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-body[_ngcontent-%COMP%]   .participants-section[_ngcontent-%COMP%]   .participant[_ngcontent-%COMP%]   .interests[_ngcontent-%COMP%]   .interest-tag[_ngcontent-%COMP%]{background:#fff;padding:.4rem .9rem;border-radius:12px;font-size:.9rem;color:#4caf50;border:1px solid #4CAF50}.check-ins-list[_ngcontent-%COMP%]   .check-in-card[_ngcontent-%COMP%]   .check-in-body[_ngcontent-%COMP%]   .additional-info[_ngcontent-%COMP%]{margin:1rem 0 .5rem;font-size:.95rem;color:#666;font-style:italic;padding-top:1rem;border-top:1px dashed #e0e0e0;line-height:1.5}@media (max-width: 768px){.detail-header[_ngcontent-%COMP%]{padding:.75rem 1rem}.detail-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.detail-content[_ngcontent-%COMP%]{padding:1rem}.check-ins-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.check-ins-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:.6rem 1rem;font-size:.9rem}}"]})};export{T as PlaygroundDetailComponent};
